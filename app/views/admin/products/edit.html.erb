<% content_for :page_title, "제품 수정" %>
<% content_for :page_description, "#{@product.name} 정보 수정" %>

<div class="max-w-4xl">
    <div class="flex items-center justify-between mb-6">
        <%= link_to admin_product_path(@product), class: "text-blue-600 hover:text-blue-700 font-medium" do %>
            <i class="fas fa-arrow-left mr-2"></i>제품 상세로
        <% end %>
    </div>

    <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-8">
        <%= form_with model: @product, url: admin_product_path(@product), method: :patch, local: true do |f| %>
            <div class="space-y-6">
                <!-- 기본 정보 -->
                <div class="border-b border-gray-200 pb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">기본 정보</h3>

                    <div class="space-y-4">
                        <div>
                            <%= f.label :name, "제품명", class: "block text-sm font-medium text-gray-700 mb-2" %>
                            <%= f.text_field :name, class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent", required: true %>
                        </div>

                        <div>
                            <%= f.label :tagline, "태그라인", class: "block text-sm font-medium text-gray-700 mb-2" %>
                            <%= f.text_field :tagline, class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "한 줄로 제품을 설명하세요" %>
                        </div>

                        <div>
                            <%= f.label :description, "상세 설명", class: "block text-sm font-medium text-gray-700 mb-2" %>
                            <%= f.text_area :description, rows: 6, class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "제품에 대한 자세한 설명을 작성하세요" %>
                        </div>

                        <div>
                            <%= f.label :website_url, "웹사이트 URL", class: "block text-sm font-medium text-gray-700 mb-2" %>
                            <%= f.url_field :website_url, class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "https://example.com" %>
                        </div>
                    </div>
                </div>

                <!-- 이미지 -->
                <div class="border-b border-gray-200 pb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">이미지</h3>

                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <%= f.label :logo_url, "로고 URL", class: "block text-sm font-medium text-gray-700 mb-2" %>
                            <%= f.url_field :logo_url, class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "https://example.com/logo.png" %>
                            <% if @product.logo_url.present? %>
                                <div class="mt-2">
                                    <img src="<%= @product.logo_url %>" alt="Current logo" class="w-20 h-20 rounded-lg object-cover">
                                </div>
                            <% end %>
                        </div>

                        <div>
                            <%= f.label :cover_url, "커버 이미지 URL", class: "block text-sm font-medium text-gray-700 mb-2" %>
                            <%= f.url_field :cover_url, class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "https://example.com/cover.png" %>
                            <% if @product.cover_url.present? %>
                                <div class="mt-2">
                                    <img src="<%= @product.cover_url %>" alt="Current cover" class="w-full h-20 rounded-lg object-cover">
                                </div>
                            <% end %>
                        </div>
                    </div>
                </div>

                <!-- 토픽 -->
                <div class="border-b border-gray-200 pb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">토픽</h3>

                    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                        <%= f.collection_check_boxes :topic_ids, Topic.all, :id, :name do |b| %>
                            <div class="flex items-center">
                                <%= b.check_box class: "w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" %>
                                <%= b.label class: "ml-2 text-sm text-gray-700" do %>
                                    <%= Topic.find(b.value).emoji %> <%= b.text %>
                                <% end %>
                            </div>
                        <% end %>
                    </div>
                </div>

                <!-- 상태 및 기타 -->
                <div class="border-b border-gray-200 pb-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">상태 및 설정</h3>

                    <div class="space-y-4">
                        <div>
                            <%= f.label :status, "상태", class: "block text-sm font-medium text-gray-700 mb-2" %>
                            <%= f.select :status,
                                options_for_select([
                                    ['초안', 'draft'],
                                    ['대기중', 'pending'],
                                    ['예정', 'scheduled'],
                                    ['출시', 'live'],
                                    ['보관', 'archived']
                                ], @product.status),
                                {},
                                class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" %>
                        </div>

                        <div class="flex items-center">
                            <%= f.check_box :featured, class: "w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500" %>
                            <%= f.label :featured, "Featured 제품으로 설정", class: "ml-2 text-sm font-medium text-gray-700" %>
                        </div>
                    </div>
                </div>

                <!-- 추가 정보 -->
                <div>
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">추가 정보</h3>

                    <div class="space-y-4">
                        <div>
                            <%= f.label :pricing_info, "가격 정보", class: "block text-sm font-medium text-gray-700 mb-2" %>
                            <%= f.text_area :pricing_info, rows: 3, class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "무료, $9.99/월, 일회성 $49 등" %>
                        </div>

                        <div>
                            <%= f.label :key_features, "주요 기능 (한 줄에 하나씩)", class: "block text-sm font-medium text-gray-700 mb-2" %>
                            <%= f.text_area :key_features, rows: 5, class: "w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent", placeholder: "실시간 협업\n클라우드 저장\n모바일 앱 지원" %>
                            <p class="mt-1 text-sm text-gray-500">각 기능을 새 줄에 작성하세요</p>
                        </div>
                    </div>
                </div>

                <!-- 버튼 -->
                <div class="flex items-center justify-between pt-6 border-t border-gray-200">
                    <%= link_to "취소", admin_product_path(@product), class: "px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors" %>
                    <div class="flex items-center space-x-3">
                        <%= f.submit "변경사항 저장", class: "px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium" %>
                    </div>
                </div>
            </div>
        <% end %>
    </div>
</div>
